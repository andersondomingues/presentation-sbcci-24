\section{A Framework for Pre-Runtime RT Analysis}

\begin{frame}{Machine learning flow}
    \begin{columns}
        \column{.45\linewidth}
        \vspace{-1cm}
        \begin{figure}[!ht]
            \centering
            \includesvg[width=.93\linewidth]{fig/flow.svg}
        \end{figure}

        \column{.5\linewidth}
        \textbf{Three phases}
        \begin{enumerate}
            \item \textcolor{omni-spring-pastels-7}{Dataset creation}
            \item \textcolor{omni-spring-pastels-8}{Regression model creation}
            \item \textcolor{omni-spring-pastels-9}{Inference and detection}
        \end{enumerate}
    \end{columns}
\end{frame}

\begin{frame}{Dataset creation phase}
    \begin{columns}
        \column{.45\linewidth}
        \vspace{-1cm}
        \begin{figure}[!ht]
            \centering
            \includesvg[width=.93\linewidth]{fig/flow.svg}
        \end{figure}

        
        \column{.5\linewidth}
        \textbf{\textcolor{omni-spring-pastels-7}{1. Population creation \& simulation}}
        \vspace{-0.5cm}
        \begin{columns}
            \column{.7\linewidth}
            \begin{itemize}
                \item Define the system size
                \item RTL simulation
                \item \textbf{With} and \textbf{without} malicious traffic
                \item Extracted data: receiving timestamp; sender ID; receiver ID; message end-to-end latency
            \end{itemize}

            \column{.3\linewidth}
            \begin{figure}[!ht]
                \centering
                \resizebox{\linewidth}{!}{
                    \input{fig/scen_gen}
                }
            \end{figure}
        \end{columns}
    \end{columns}
\end{frame}

\begin{frame}{Dataset creation phase}
    \begin{columns}
        \column{.45\linewidth}
        \vspace{-1cm}
        \begin{figure}[!ht]
            \centering
            \includesvg[width=.93\linewidth]{fig/flow.svg}
        \end{figure}

        
        \column{.5\linewidth}
        \textbf{\textcolor{omni-spring-pastels-7}{2. Data pre-processing}}
        \begin{itemize}
            \item Retrieve data from simulation logs
            \item Timestamps converted from system-time to application-time
            \item Remove unrelated messages (based on IDs)
            \item Obtain mapping distance (hops)
            \item Convert IDs to categorical
            \item \textbf{\{timestamp, hops, sender, receiver, latency\}}
        \end{itemize}
    \end{columns}
\end{frame}

\begin{frame}{Dataset creation phase}
    \begin{columns}
        \column{.45\linewidth}
        \vspace{-1cm}
        \begin{figure}[!ht]
            \centering
            \includesvg[width=.93\linewidth]{fig/flow.svg}
        \end{figure}

        
        \column{.5\linewidth}
        \textbf{\textcolor{omni-spring-pastels-7}{Regression dataset}}
        \begin{itemize}
            \item Subset of 75\% of the scenarios \textbf{without} malicious traffic
        \end{itemize}
        % \vspace{0.5cm}
        \textbf{\textcolor{omni-spring-pastels-7}{Classification dataset}}
        \begin{itemize}
            \item Remaining 25\% scenarios \textbf{with} malicious traffic
            \item \textit{Tag} indicating if an instance is affected by the malicious traffic. True if \textit{latency}  deviates more than a threshold (5\%) from the same instance without the malicious traffic
        \end{itemize}
    \end{columns}
\end{frame}

\begin{frame}{Regression model creation phase}
    \begin{columns}
        \column{.45\linewidth}
        \vspace{-1cm}
        \begin{figure}[!ht]
            \centering
            \includesvg[width=.93\linewidth]{fig/flow.svg}
        \end{figure}

        
        \column{.5\linewidth}
        \textbf{\textcolor{omni-spring-pastels-8}{3. Cross-validation}}
        \begin{itemize}
            \item XGBRegressor Python API from the \cite{dmlc:2014:XGBoost}
            \item Build the \textbf{regression model} with the \textbf{regression dataset}
            \item Initially with default hyperparameters
        \end{itemize}
    \end{columns}
\end{frame}

\begin{frame}{Regression model creation phase}
    \begin{columns}
        \column{.45\linewidth}
        \vspace{-1cm}
        \begin{figure}[!ht]
            \centering
            \includesvg[width=.93\linewidth]{fig/flow.svg}
        \end{figure}

        
        \column{.5\linewidth}
        \textbf{\textcolor{omni-spring-pastels-8}{4. Hyperparameter Tuning}}
        \begin{itemize}
            \item Tune hyperparameters if RMS error from cross-validation is unsatisfactory
            \item Iteratively simplifies the XGBoost model
            \item Two hyperparameters: number of estimators and maximum depth
        \end{itemize}
    \end{columns}
\end{frame}

\begin{frame}{Inference and detection phase}
    \begin{columns}
        \column{.45\linewidth}
        \vspace{-1cm}
        \begin{figure}[!ht]
            \centering
            \includesvg[width=.93\linewidth]{fig/flow.svg}
        \end{figure}

        
        \column{.5\linewidth}
        \textbf{\textcolor{omni-spring-pastels-9}{5. Regression inference}}
        \begin{itemize}
            \item Use the \textbf{classification dataset} without \textit{tag} and \textit{latency} 
            \item Infer a latency using the \textbf{regression model}
        \end{itemize}
    \end{columns}
\end{frame}

\begin{frame}{Inference and detection phase}
    \begin{columns}
        \column{.45\linewidth}
        \vspace{-1cm}
        \begin{figure}[!ht]
            \centering
            \includesvg[width=.93\linewidth]{fig/flow.svg}
        \end{figure}

        
        \column{.5\linewidth}
        \textbf{\textcolor{omni-spring-pastels-9}{6. Anomaly detection}}
        \begin{itemize}
            \item Use the latencies inferred by the \textbf{regression model} to compute the \textit{tag}. True if deviates more than a threshold (5\%) from the latency in the \textbf{classification dataset}
            \item Classification is evaluated against the \textit{tag} present in the \textbf{classification dataset}
        \end{itemize}
    \end{columns}
\end{frame}

